# 🔐 سياسة الأمان (Security Policy)

## 🎯 نظرة عامة

نحن في StuTally نأخذ الأمان على محمل الجد. نشكر المجتمع الأمني على المساعدة في الحفاظ على أمان مستخدمينا من خلال الكشف المسؤول عن الثغرات الأمنية.

---

## 🔄 الإصدارات المدعومة

| الإصدار | الدعم الأمني |
| ------- | ------------ |
| 2.0.x   | ✅ مدعوم     |
| 1.5.x   | ⚠️ دعم محدود |
| < 1.5   | ❌ غير مدعوم |

**ملاحظة**: نوصي بشدة بالترقية دائماً إلى أحدث إصدار للحصول على أحدث تحديثات الأمان.

---

## 🚨 الإبلاغ عن ثغرة أمنية

### ⚠️ **مهم جداً**: لا تبلّغ عن الثغرات الأمنية عبر GitHub Issues العامة!

إذا اكتشفت ثغرة أمنية، نرجو منك:

### 1️⃣ الإبلاغ السري

أبلغنا عبر البريد الإلكتروني:

📧 **security@stutally.project** (استبدل بالبريد الفعلي)

### 2️⃣ المعلومات المطلوبة

يرجى تضمين:

```markdown
### وصف الثغرة
[وصف تفصيلي للثغرة]

### نوع الثغرة
- [ ] SQL Injection
- [ ] XSS (Cross-Site Scripting)
- [ ] CSRF (Cross-Site Request Forgery)
- [ ] Authentication Bypass
- [ ] Authorization Issues
- [ ] Information Disclosure
- [ ] Remote Code Execution
- [ ] Denial of Service
- [ ] Other: __________

### التأثير
[ما هو التأثير المحتمل؟]

### الخطورة (حسب تقديرك)
- [ ] Critical (حرج)
- [ ] High (عالي)
- [ ] Medium (متوسط)
- [ ] Low (منخفض)

### خطوات إعادة الإنتاج
1. 
2. 
3. 

### Proof of Concept (PoC)
[أضف كود أو سكربت توضيحي إن أمكن]

### البيئة
- StuTally Version: 
- OS: 
- Browser (if applicable): 

### الحل المقترح (اختياري)
[إذا كان لديك اقتراح للإصلاح]
```

### 3️⃣ ما الذي يحدث بعد ذلك؟

1. **الاستلام (خلال 24 ساعة)**: سنرسل تأكيداً باستلام تقريرك
2. **التقييم (خلال 72 ساعة)**: سنقيّم الثغرة ونحدد خطورتها
3. **التواصل (حسب الحاجة)**: قد نطلب معلومات إضافية
4. **الإصلاح**: سنعمل على إصلاح الثغرة
5. **الإصدار**: سنُصدر تحديث أمني
6. **الإفصاح**: بعد الإصلاح، سنفصح عن الثغرة (بالتنسيق معك)

### 4️⃣ الجدول الزمني المتوقع

| الخطورة | وقت الرد الأولي | وقت الإصلاح المستهدف |
|---------|-----------------|---------------------|
| Critical | < 24 ساعة | < 7 أيام |
| High | < 48 ساعة | < 30 يوم |
| Medium | < 72 ساعة | < 90 يوم |
| Low | < 1 أسبوع | حسب الأولوية |

---

## 🏆 برنامج المكافآت (Bug Bounty)

**الحالة الحالية**: قيد التطوير 🚧

نحن نخطط لإطلاق برنامج مكافآت للثغرات الأمنية قريباً. في الوقت الحالي:

### 🌟 الاعتراف

- ✅ ذكرك في ملف SECURITY.md
- ✅ ذكرك في notes الإصدار
- ✅ شارة "Security Researcher" على GitHub

### 💰 المكافآت المستقبلية (مخطط)

| الخطورة | المكافأة المتوقعة |
|---------|-------------------|
| Critical | $500 - $2000 |
| High | $250 - $500 |
| Medium | $100 - $250 |
| Low | $50 - $100 |

---

## 🛡️ أفضل الممارسات الأمنية

### للمطورين

#### 1. إدارة الأسرار
```bash
# ✅ استخدم متغيرات البيئة
export SECRET_KEY='your-secret-key'
export JWT_SECRET_KEY='your-jwt-secret'

# ❌ لا تضع الأسرار في الكود
app.secret_key = 'hardcoded-secret'  # سيء جداً!
```

#### 2. التحقق من المدخلات
```python
# ✅ التحقق والتنظيف دائماً
from werkzeug.utils import secure_filename

filename = secure_filename(file.filename)

# ❌ لا تثق بالمدخلات أبداً
filename = file.filename  # خطر!
```

#### 3. استعلامات قاعدة البيانات
```python
# ✅ استخدم Parameterized Queries
cursor.execute("SELECT * FROM users WHERE username=?", (username,))

# ❌ لا تستخدم String Concatenation
query = f"SELECT * FROM users WHERE username='{username}'"  # SQL Injection!
```

#### 4. المصادقة والتفويض
```python
# ✅ احمِ المسارات الحساسة
@app.route('/admin')
@login_required
@admin_required
def admin_panel():
    pass

# ❌ لا تترك مسارات حساسة مفتوحة
@app.route('/admin')
def admin_panel():
    pass  # أي شخص يمكنه الوصول!
```

### للمستخدمين

#### 1. كلمات المرور القوية
- ✅ استخدم كلمات مرور معقدة (12+ حرف)
- ✅ غيّر كلمة المرور الافتراضية فوراً
- ✅ استخدم مدير كلمات مرور

#### 2. تحديث النظام
```bash
# تحقق من التحديثات بانتظام
git pull origin main
pip install -r requirements.txt --upgrade
```

#### 3. إعدادات الإنتاج
```bash
# في الإنتاج
DEBUG=False
FLASK_ENV=production

# استخدم HTTPS
# فعّل CORS بحذر
# حدّد حجم الملفات المرفوعة
```

#### 4. النسخ الاحتياطي
```bash
# انسخ قاعدة البيانات بانتظام
cp data/detections.db backups/detections_$(date +%Y%m%d).db
```

---

## 🔍 الثغرات المعروفة والمعالجة

### v2.0.0 (الحالي)

| تاريخ الإبلاغ | الخطورة | الوصف | الحالة | الإصدار المصلح |
|--------------|---------|-------|--------|----------------|
| - | - | لا توجد ثغرات معروفة | - | - |

### الإصدارات السابقة

#### v1.5.0
| تاريخ الإبلاغ | الخطورة | الوصف | الحالة | الإصدار المصلح |
|--------------|---------|-------|--------|----------------|
| 2024-11-20 | Medium | Session Fixation | ✅ مُصلح | v1.5.1 |
| 2024-10-15 | Low | CORS Misconfiguration | ✅ مُصلح | v1.5.2 |

---

## 🔐 قائمة التحقق الأمنية

### قبل النشر في الإنتاج

- [ ] تغيير جميع الأسرار الافتراضية
- [ ] تعطيل وضع DEBUG
- [ ] تفعيل HTTPS
- [ ] تحديد حجم أقصى للملفات المرفوعة
- [ ] تحديث جميع المكتبات
- [ ] مراجعة إعدادات CORS
- [ ] تفعيل rate limiting
- [ ] إعداد النسخ الاحتياطي التلقائي
- [ ] مراجعة صلاحيات الملفات
- [ ] تفعيل السجلات (logging)
- [ ] إعداد مراقبة النظام

### صيانة دورية

#### أسبوعياً
- [ ] مراجعة السجلات للأنشطة المشبوهة
- [ ] التحقق من النسخ الاحتياطية

#### شهرياً
- [ ] تحديث المكتبات
- [ ] مراجعة الصلاحيات
- [ ] اختبار النسخ الاحتياطي

#### ربع سنوياً
- [ ] تدقيق أمني شامل
- [ ] مراجعة كود الأمان
- [ ] اختبار الاختراق

---

## 📚 موارد الأمان

### أدوات مفيدة

- **Bandit**: فحص أمان Python
  ```bash
  pip install bandit
  bandit -r app/
  ```

- **Safety**: فحص المكتبات للثغرات المعروفة
  ```bash
  pip install safety
  safety check
  ```

- **OWASP ZAP**: اختبار اختراق تطبيقات الويب
  https://www.zaproxy.org/

### مراجع مهمة

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Flask Security Best Practices](https://flask.palletsprojects.com/en/2.3.x/security/)
- [Python Security](https://python.readthedocs.io/en/latest/library/security_warnings.html)
- [CWE (Common Weakness Enumeration)](https://cwe.mitre.org/)

---

## 🏅 قاعة الشهرة (Hall of Fame)

نشكر الباحثين الأمنيين التالية أسماؤهم على مساهماتهم في تأمين StuTally:

<!-- سيتم تحديث هذا القسم عند الإبلاغ عن ثغرات -->

| الباحث | التاريخ | الثغرة | الخطورة |
|---------|--------|--------|---------|
| - | - | - | - |

---

## 📞 الاتصال

لأي استفسارات أمنية:

- 🔒 **تقارير الثغرات**: security@stutally.project
- 💬 **أسئلة عامة**: [GitHub Discussions](https://github.com/aseelalmutari/StuTally-Project/discussions)
- 📧 **البريد العام**: contact@stutally.project

---

## ⚖️ سياسة الإفصاح

نتبع **Responsible Disclosure Policy**:

1. **الإبلاغ السري أولاً**: أبلغنا بشكل خاص
2. **منح وقت للإصلاح**: انتظر حتى نصدر التصحيح
3. **الإفصاح المنسق**: سننشر معاً بعد الإصلاح
4. **الاعتراف**: سنعترف بمساهمتك علناً (إذا رغبت)

### الجدول الزمني للإفصاح

- **Critical/High**: 90 يوم من الإبلاغ
- **Medium**: 120 يوم من الإبلاغ
- **Low**: 180 يوم من الإبلاغ

---

## 📝 التحديثات

سيتم تحديث هذه السياسة بانتظام. آخر تحديث: **أكتوبر 2025**

---

<div align="center">

**الأمان مسؤولية الجميع. شكراً لمساعدتنا في حماية مستخدمي StuTally! 🛡️**

[⬆️ العودة للأعلى](#-سياسة-الأمان-security-policy)

</div>

